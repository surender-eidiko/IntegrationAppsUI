<html>
<head>
<!-- jQuery -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
        		
</head>

<body>
<script>
function testFunc(){
	
	alert("Hello");
}
	$(document).ready(function(){
		
		$.ajax({
                    type: "GET", 	
                     //url :"http://192.168.1.163:1235/getdata", 	
                    url:"/IntegrationAppsUI/test.html",
                    contentType: "application/json",		
                    success: function (json) {
                    	
                    	var json = JSON.parse(json);
                    	//alert(JSON.stringify(json));
                    	var boards=json.Boards;
						var boardandListNotifications=json.boardAndListNotifications;
						var CardNotifications = json.cardNotifications;
						var CheckListNotifications = json.checkListNotifications;
                    	var rooms = json.Rooms;
                    	var displayname = json.displayname;
                    	//boards generation
						$.each(boards, function(id,obj){
			        	$("#boards").append($('<option>').text(obj.name).attr('value',obj.id));
						}); 
                    	
						$.each(boardandListNotifications, function () {
							$("#boardAndListNotifications").append($("<label>").text(this.name).prepend(
					        $("<input>").attr('type', 'checkbox').attr('name',"boardsAndListNotifications").val(this.id)
					          .prop('checked', this.checked)
					        ));
					        });	
						$.each(CardNotifications, function () {
							$("#cardNotifications").append($("<label>").text(this.name).prepend(
					        $("<input>").attr('type', 'checkbox').attr('name',"cardNotifications").val(this.id)
					          .prop('checked', this.checked)
					        ));
					        });	
							
						$.each(CheckListNotifications, function () {
							$("#checkListNotifications").append($("<label>").text(this.name).prepend(
					        $("<input>").attr('type', 'checkbox').attr('name',"checkListNotifications").val(this.id)
					          .prop('checked', this.checked)
					        ));
					        });	
								
							$("#rooms").append($('<option>')).text("select room");
							$.each(rooms, function(id,obj){
					        $("#rooms").append($('<option>').text(obj.name).attr('value',obj.id));
							}); 
						
							$("#displayname").val(displayname);
							//alert(JSON.stringify(rooms));
                    },
                });

		$.fn.serializeObject = function()
        {
        var o = {};
		var a = this.serializeArray();
		$.each(a, function() {
        if (o[this.name] !== undefined) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
		});
		return o;
		};
		$("form").submit(function (){
			$("#loading").show();
			$.ajax({
				url: "http://192.168.1.157:8080/IntegrationAppsUI/ajaxtest.html",
				type : "GET",
				success : function(){
					alert("Success");
					$("#loading").show();
				},
				 error: function(data){
					$("#loading").hide();
					alert(data);
					setTimeOut(testFunc,5000);
				} 
			});
			//var res = JSON.stringify($('form').serializeObject());
			//alert(res);
		});
});
			
</script>
	<div id="container">
		<div id="loading" style="display: none;">Loading</div>
		<div id="preferences" style="display:block">
			<form name="form" action="" method="post"> 		
				<h3>Trello Configuration</h3><br>
				<label>Trello Boards</label>
				<select name="board" id="boards"></select><br><br>
				
				<label>Notifications : Boards&Lists</label>
				<div  id="boardAndListNotifications"></div><br><br>
				
				<label>Notifications : Cards</label>
				<div id="cardNotifications"></div><br><br>
				
				<label>Notifications : Checklists</label>
				<div id="checkListNotifications"></div><br><br>
				
				<h3>Spark Configuration</h3>
				<label>Spark Rooms</label>
				<select name="room" id="rooms"></select><br/>
				
				<label>Display Name</label>
				<input name="displayname" id="displayname"><br>
					
				<br><br>
				<input type="submit" value="Add Integration" />
				
			</form>
		</div>
		
	</div>
</body>

</html>